<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zimo - Main Menu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Bowlby+One&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #222; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .font-bowlby { font-family: 'Bowlby One', cursive; }
        
        /* Container HP */
        .phone-container {
            width: 384px; /* w-96 */
            height: 812px;
            position: relative;
            background-color: #f6f7eb; /* Warna krem background asli */
            overflow: hidden;
            border-radius: 40px;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* Hide scrollbar */
        ::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

    <div class="phone-container relative">

        <div class="absolute top-4 w-full px-6 flex justify-between items-center z-30">
            <div class="text-black text-sm font-semibold">9:41</div>
            <div class="flex gap-1">
                <div class="w-4 h-4 bg-black rounded-full opacity-20"></div>
                <div class="w-4 h-4 bg-black rounded-full opacity-20"></div>
            </div>
        </div>

        <div class="absolute top-[60px] left-[20px] flex flex-col gap-2 z-20">
            <div class="relative w-32 h-6 bg-[#26a69a] rounded-full flex items-center shadow-md">
                <div class="absolute -left-2 w-8 h-8 bg-yellow-400 rounded-full border-2 border-[#f6f7eb] flex items-center justify-center text-white font-bowlby shadow-sm text-xs z-10">Z</div>
                <span class="ml-8 text-white text-xs font-extrabold tracking-wider">20.000</span>
            </div>
            <div class="relative w-32 h-3 bg-gray-600 rounded-full border border-black/20 mt-1">
                <div class="w-[60%] h-full bg-red-500 rounded-full"></div>
                <div class="absolute -left-2 -top-[2px] w-5 h-5 bg-[#6da34d] rounded-full border border-white flex items-center justify-center text-[9px] text-white font-bold shadow-sm">L</div>
            </div>
            <div class="relative w-32 h-3 bg-gray-600 rounded-full border border-black/20">
                <div class="w-[40%] h-full bg-orange-500 rounded-full"></div>
                <div class="absolute -left-2 -top-[2px] w-5 h-5 bg-[#6da34d] rounded-full border border-white flex items-center justify-center text-[9px] text-white font-bold shadow-sm">K</div>
            </div>
        </div>

        <div class="absolute top-[60px] right-[20px] flex flex-col gap-2 items-end z-20">
            <div class="relative w-32 h-6 bg-[#26a69a] rounded-full flex items-center justify-end shadow-md">
                <span class="mr-10 text-white text-xs font-extrabold tracking-wider">Normal</span>
                <div class="absolute -right-2 bg-yellow-400 px-2 py-1 rounded-md text-[10px] font-bowlby text-[#555] shadow-sm z-10 border-2 border-[#f6f7eb]">BMI</div>
            </div>
            <div class="relative w-32 h-3 bg-gray-600 rounded-full border border-black/20 mt-1">
                <div class="w-[70%] h-full bg-yellow-400 rounded-full ml-auto"></div>
                <div class="absolute -right-2 -top-[2px] w-5 h-5 bg-[#6da34d] rounded-full border border-white flex items-center justify-center text-[9px] text-white font-bold shadow-sm">E</div>
            </div>
            <div class="relative w-32 h-3 bg-gray-600 rounded-full border border-black/20">
                <div class="w-[50%] h-full bg-pink-400 rounded-full ml-auto"></div>
                <div class="absolute -right-2 -top-[2px] w-5 h-5 bg-[#6da34d] rounded-full border border-white flex items-center justify-center text-[9px] text-white font-bold shadow-sm">P</div>
            </div>
        </div>

        <div class="absolute bottom-0 w-full h-[45%] z-0 overflow-hidden rounded-t-[40px]">
            <svg class="absolute bottom-0 w-full h-full scale-[1.1]" viewBox="0 0 375 300" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0,150 C120,50 250,250 375,180 L375,300 L0,300 Z" fill="#8DA583"/>
            </svg>
            <svg class="absolute bottom-0 w-full h-full opacity-40 scale-[1.05]" viewBox="0 0 375 300" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                 <path d="M0,200 C80,100 200,120 375,50 L375,300 L0,300 Z" fill="#A3D154"/>
            </svg>
        </div>

        <div class="absolute top-[180px] w-full text-center z-10">
            <h1 class="text-5xl text-white font-bowlby tracking-wide drop-shadow-[0_2px_0_rgba(0,0,0,1)]" 
                style="-webkit-text-stroke: 1.5px black; text-shadow: 3px 3px 0px #000;">
                Hello<br>Zimo
            </h1>
        </div>

        <div class="absolute top-[320px] left-1/2 transform -translate-x-1/2 z-10 flex justify-center items-center">
            <img src="{{ url_for('static', filename='zimo.png') }}" 
                 class="w-48 h-auto drop-shadow-2xl filter" 
                 alt="Zimo Character"
                 onerror="this.src='https://placehold.co/200x250/87CEEB/ffffff?text=Zimo+PNG';"> 
        </div>

        <div class="absolute left-6 top-[550px] flex flex-col gap-6 z-20">
            <div class="flex flex-col items-center">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-lg border-b-4 border-gray-200 cursor-pointer hover:scale-105 transition text-2xl text-teal-600">üëï</div>
                <span class="text-white text-[10px] font-bold mt-1">Dress</span>
            </div>
            
            <div onclick="openSport()" class="flex flex-col items-center cursor-pointer group">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-lg border-b-4 border-gray-200 group-hover:scale-105 transition text-2xl text-teal-600">üèãÔ∏è</div>
                <span class="text-white text-[10px] font-bold mt-1">Sport</span>
            </div>
        </div>

        <div class="absolute right-6 top-[550px] flex flex-col gap-6 z-20">
            <div class="flex flex-col items-center">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-lg border-b-4 border-gray-200 cursor-pointer hover:scale-105 transition text-2xl text-blue-500">üè™</div>
                <span class="text-white text-[10px] font-bold mt-1">Shop</span>
            </div>
            <div class="flex flex-col items-center">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-lg border-b-4 border-gray-200 cursor-pointer hover:scale-105 transition text-2xl text-blue-500">üìò</div>
                <span class="text-white text-[10px] font-bold mt-1">Information</span>
            </div>
        </div>

        <div class="absolute bottom-0 w-full h-[100px] bg-[#6da34d]/90 rounded-t-[30px] flex justify-around items-center px-2 pb-2 z-40 border-t-4 border-[#5a8a3f]">
            <div class="flex flex-col items-center group cursor-pointer">
                <div class="w-14 h-14 bg-[#a3d154] rounded-2xl flex items-center justify-center shadow-md border-b-4 border-[#7ea63b] group-hover:-translate-y-1 transition">
                    <span class="text-2xl text-yellow-100">üéÆ</span>
                </div>
                <span class="text-white text-xs font-bold mt-1 drop-shadow-md">Games</span>
            </div>

            <button type="button" onclick="openPopup()" class="flex flex-col items-center group cursor-pointer pb-1 z-50">
                <div class="w-14 h-14 bg-white rounded-2xl flex items-center justify-center shadow-xl border-b-4 border-gray-300 group-hover:-translate-y-1 transition transform">
                    <span class="text-3xl text-[#6da34d] font-black">+</span>
                </div>
                <span class="text-white text-xs font-extrabold mt-1 drop-shadow-md">Eat</span>
            </button>

            <div class="flex flex-col items-center group cursor-pointer">
                <div class="w-14 h-14 bg-[#a3d154] rounded-2xl flex items-center justify-center shadow-md border-b-4 border-[#7ea63b] group-hover:-translate-y-1 transition">
                    <span class="text-2xl text-yellow-100">üç¥</span>
                </div>
                <span class="text-white text-xs font-bold mt-1 drop-shadow-md">Try it</span>
            </div>

             <div class="flex flex-col items-center group cursor-pointer">
                <div class="w-14 h-14 bg-white rounded-2xl flex items-center justify-center shadow-md border-b-4 border-gray-300 group-hover:-translate-y-1 transition">
                    <span class="text-2xl text-[#6da34d]">üìã</span>
                </div>
                <span class="text-white text-xs font-bold mt-1 drop-shadow-md">Quest</span>
            </div>
        </div>

        <div id="eatPopup" class="hidden absolute inset-0 z-50">
            <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closePopup()"></div>
            <div class="absolute bottom-0 w-full h-[50%] bg-white rounded-t-[40px] p-6 flex flex-col items-center animate-slideUp">
                <button onclick="closePopup()" class="absolute left-6 top-6 text-[#86B537] text-3xl font-bold">&lt;</button>
                <div class="w-20 h-20 bg-white border-[6px] border-[#86B537] rounded-3xl -mt-[60px] flex items-center justify-center shadow-lg mb-2">
                    <span class="text-5xl text-[#86B537] font-bold">+</span>
                </div>
                <div class="bg-[#86B537] text-white px-10 py-2 rounded-xl transform -rotate-1 text-2xl font-extrabold shadow-md mb-8 tracking-widest">Eat</div>
                <form id="uploadForm" method="post" enctype="multipart/form-data" class="w-full flex justify-between px-6">
                    <label class="flex flex-col items-center gap-2 cursor-pointer transition transform hover:scale-105">
                        <div class="w-14 h-14 bg-[#86B537] rounded-2xl flex items-center justify-center shadow-lg border-2 border-white"><span class="text-2xl">üñºÔ∏è</span></div>
                        <span class="text-xs font-bold text-gray-800">Gallery</span>
                        <input type="file" name="file_foto" accept="image/*" onchange="submitData()" class="hidden">
                    </label>
                    <label class="flex flex-col items-center gap-2 cursor-pointer transition transform hover:scale-105 -mt-4">
                        <div class="w-28 h-28 bg-gray-300 rounded-[2.5rem] flex items-center justify-center shadow-inner border-4 border-white relative"><span class="text-5xl text-white">üì∑</span></div>
                        <input type="file" name="file_foto" accept="image/*" capture="environment" onchange="submitData()" class="hidden">
                    </label>
                    <div class="flex flex-col items-center gap-2 opacity-50">
                        <div class="w-14 h-14 bg-[#86B537] rounded-2xl flex items-center justify-center shadow-lg border-2 border-white"><span class="text-2xl">‚å®Ô∏è</span></div>
                        <span class="text-xs font-bold text-gray-800">Type</span>
                    </div>
                </form>
            </div>
        </div>

        <div id="sportPopup" class="hidden absolute inset-0 z-50">
            <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeSport()"></div>
            
            <div class="absolute bottom-0 w-full h-[92%] bg-[#7fb043] rounded-t-[40px] flex flex-col items-center animate-slideUp overflow-visible shadow-[0_-10px_40px_rgba(0,0,0,0.3)]">
                
                <div class="w-24 h-24 bg-[#ffdd00] border-[6px] border-white rounded-full -mt-[50px] flex items-center justify-center shadow-2xl mb-2 relative z-50 transform hover:scale-110 transition duration-300">
                    <span class="text-5xl drop-shadow-sm">üèãÔ∏è</span>
                </div>
                
                <button onclick="closeSport()" class="absolute left-6 top-6 text-white text-3xl font-bold z-50 hover:scale-110 transition">&lt;</button>

                <div class="bg-[#2a9d8f] text-white px-12 py-2 rounded-xl text-2xl font-extrabold shadow-md mb-4 tracking-widest mt-2 z-10 border-b-4 border-[#1d7066]">
                    Sport
                </div>

                <div class="w-full h-full overflow-y-auto pb-20 px-6">
                    
                    <div class="w-full mb-6">
                        <div class="bg-gradient-to-br from-white/30 to-white/10 rounded-[30px] p-5 border border-white/50 backdrop-blur-lg shadow-xl">
                            
                            <h3 class="text-white font-bold mb-4 text-base flex items-center gap-2 border-b border-white/30 pb-2">
                                <span class="bg-white/20 p-1 rounded-lg">‚åö</span> 
                                <span id="device-name" class="tracking-wide text-shadow-sm">Huawei Band 10</span>
                            </h3>
                            
                            <div class="flex justify-between items-end mb-1">
                                <span class="text-white text-xs font-bold flex items-center gap-1 opacity-90">üë£ Steps</span>
                                <span class="text-white text-sm font-extrabold" id="val-steps">0 <span class="text-[10px] font-normal opacity-80">/ 10k</span></span>
                            </div>
                            <div class="w-full bg-black/20 rounded-full h-3 mb-4 border border-white/10 shadow-inner">
                                <div id="bar-steps" class="bg-gradient-to-r from-blue-300 to-blue-500 h-full rounded-full shadow-[0_0_10px_rgba(59,130,246,0.5)]" style="width: 0%"></div>
                            </div>

                            <div class="flex justify-between items-end mb-1">
                                <span class="text-white text-xs font-bold flex items-center gap-1 opacity-90">‚ù§Ô∏è HR</span>
                                <span class="text-white text-sm font-extrabold" id="val-hr">-- <span class="text-[10px] font-normal opacity-80">bpm</span></span>
                            </div>
                            <div class="w-full bg-black/20 rounded-full h-3 mb-4 border border-white/10 shadow-inner">
                                <div id="bar-hr" class="bg-gradient-to-r from-red-400 to-red-600 h-full rounded-full shadow-[0_0_10px_rgba(239,68,68,0.5)]" style="width: 50%"></div>
                            </div>

                            <div class="flex justify-between items-end mb-1">
                                <span class="text-white text-xs font-bold flex items-center gap-1 opacity-90">üî• Cal</span>
                                <span class="text-white text-sm font-extrabold" id="val-cal">0 <span class="text-[10px] font-normal opacity-80">kcal</span></span>
                            </div>
                            <div class="w-full bg-black/20 rounded-full h-3 border border-white/10 shadow-inner">
                                <div id="bar-cal" class="bg-gradient-to-r from-orange-300 to-orange-500 h-full rounded-full shadow-[0_0_10px_rgba(249,115,22,0.5)]" style="width: 0%"></div>
                            </div>
                            
                            <button onclick="syncHuaweiData()" class="w-full mt-5 bg-white hover:bg-gray-100 text-[#2a9d8f] text-sm font-black py-3 rounded-xl transition shadow-md border-b-4 border-gray-200 active:border-b-0 active:translate-y-1">
                                üîÑ SYNC DATA
                            </button>
                        </div>
                    </div>

                    <div class="w-full grid grid-cols-3 gap-4 pb-10">
                        <div class="bg-[#6da34d] p-3 rounded-2xl border-2 border-white flex flex-col items-center shadow-md cursor-pointer hover:scale-105 transition"><span class="text-4xl mb-1 drop-shadow-md">üö∂</span><span class="text-white text-xs font-bold">Walk</span></div>
                        <div class="bg-[#6da34d] p-3 rounded-2xl border-2 border-white flex flex-col items-center shadow-md cursor-pointer hover:scale-105 transition"><span class="text-4xl mb-1 drop-shadow-md">üèÉ</span><span class="text-white text-xs font-bold">Run</span></div>
                        <div class="bg-[#6da34d] p-3 rounded-2xl border-2 border-white flex flex-col items-center shadow-md cursor-pointer hover:scale-105 transition"><span class="text-4xl mb-1 drop-shadow-md">üö¥</span><span class="text-white text-xs font-bold">Cycle</span></div>
                        <div class="bg-[#6da34d] p-3 rounded-2xl border-2 border-white flex flex-col items-center shadow-md cursor-pointer hover:scale-105 transition"><span class="text-4xl mb-1 drop-shadow-md">üèä</span><span class="text-white text-xs font-bold">Swim</span></div>
                        <div class="bg-[#6da34d] p-3 rounded-2xl border-2 border-white flex flex-col items-center shadow-md cursor-pointer hover:scale-105 transition"><span class="text-4xl mb-1 drop-shadow-md">üè∏</span><span class="text-white text-xs font-bold">Bdminton</span></div>
                        <div class="bg-[#6da34d] p-3 rounded-2xl border-2 border-white flex flex-col items-center shadow-md cursor-pointer hover:scale-105 transition"><span class="text-4xl mb-1 drop-shadow-md">üß∂</span><span class="text-white text-xs font-bold">Jump</span></div>
                    </div>

                </div>
            </div>
        </div>


        <div id="loadingScreen" class="hidden absolute inset-0 bg-white/95 z-[60] flex flex-col items-center justify-center text-center">
            <div class="w-16 h-16 border-4 border-[#86B537] border-t-transparent rounded-full animate-spin mb-4"></div>
            <h3 class="text-xl font-bold text-gray-700">Checking Food...</h3>
        </div>

        {% if hasil or error %}
        <div class="absolute inset-0 z-[70] bg-black/80 flex items-center justify-center p-4">
            <div class="bg-white w-full max-h-[80%] overflow-y-auto rounded-3xl p-6 border-4 border-[#86B537] relative shadow-2xl">
                {% if error %}
                    <h3 class="text-red-500 font-bold text-xl mb-2">Error!</h3>
                    <p class="text-gray-600 text-sm">{{ error }}</p>
                {% else %}
                    {{ hasil | safe }}
                {% endif %}
                <button onclick="window.location.href='/'" class="mt-6 w-full bg-[#86B537] text-white font-bold py-3 rounded-xl hover:bg-[#6da34d] transition">OK</button>
            </div>
        </div>
        {% endif %}

    </div>

    <script>
        const popup = document.getElementById('eatPopup'); 
        const sportPopup = document.getElementById('sportPopup');
        const loading = document.getElementById('loadingScreen');
        const form = document.getElementById('uploadForm');

        function openPopup() { if(popup) popup.classList.remove('hidden'); }
        function closePopup() { if(popup) popup.classList.add('hidden'); }
        
        // FUNGSI UNTUK SPORT POPUP
        function openSport() { if(sportPopup) sportPopup.classList.remove('hidden'); }
        function closeSport() { if(sportPopup) sportPopup.classList.add('hidden'); }

        // FUNGSI SIMULASI SYNC (Updated Text)
        function syncHuaweiData() {
            const btn = document.querySelector('button[onclick="syncHuaweiData()"]');
            btn.innerHTML = "‚è≥ Syncing...";
            
            setTimeout(() => {
                document.getElementById('device-name').innerText = "Huawei Band 10 (Connected)";
                document.getElementById('device-name').classList.add('text-green-200');
                
                document.getElementById('val-steps').innerHTML = "6,543 <span class='text-[10px] font-normal opacity-80'>/ 10k</span>";
                document.getElementById('bar-steps').style.width = "65%";
                
                document.getElementById('val-hr').innerHTML = "88 <span class='text-[10px] font-normal opacity-80'>bpm</span>";
                document.getElementById('bar-hr').style.width = "60%";
                
                document.getElementById('val-cal').innerHTML = "420 <span class='text-[10px] font-normal opacity-80'>kcal</span>";
                document.getElementById('bar-cal').style.width = "40%";
                
                btn.innerHTML = "‚úÖ Synced!";
                btn.classList.replace('bg-white', 'bg-green-100');
                btn.classList.replace('text-[#2a9d8f]', 'text-green-700');
                
                // Reset button text after a while
                setTimeout(() => {
                    btn.innerHTML = "üîÑ SYNC DATA";
                    btn.classList.replace('bg-green-100', 'bg-white');
                    btn.classList.replace('text-green-700', 'text-[#2a9d8f]');
                }, 3000);

            }, 2000);
        }

        function submitData() {
            if(popup) popup.classList.add('hidden');
            if(loading) {
                loading.classList.remove('hidden');
                loading.style.display = 'flex';
            }
            if(form) form.submit();
        }
    </script>
    
    <style>
        .animate-slideUp { animation: slideUp 0.3s ease-out forwards; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    </style>
</body>
</html>